version: "3.8"
services:

  events:
    build: ./events/
    ports:
      - 9001:9001
    container_name: events
    environment:
      - PORT= 9001
    volumes:
      - "./events/:/app"
    networks:
      - my-network

  tickets:
    build: ./tickets/
    ports:
      - 9002:9002
    container_name: tickets
    environment:
      - PORT= 9002
    volumes:
      - "./tickets/:/app"

  consul:
    image: consul:latest
    container_name: consul
    command: "agent -server -bootstrap-expect=1 -ui -client 0.0.0.0"
    ports:
      - "8500:8500"
    volumes:
      - ./events/events.hcl:/consul/config/events.hcl
    networks:
      - my-network

networks:
  my-network:
